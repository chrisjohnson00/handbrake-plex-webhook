name: BuildKite

on:
  push:
    branches: [ main ]
    tags:
      - v**
  pull_request:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Fire buildkite request
      run: |
        curl -H "Authorization: Bearer ${{ secrets.BUILDKITE_TOKEN }}" "https://api.buildkite.com/v2/organizations/christv/pipelines/bash-example/builds" \
        -X "POST" \
        -F "commit=HEAD" \
        -F "branch=master" \
        -F "message=First build :rocket:"
